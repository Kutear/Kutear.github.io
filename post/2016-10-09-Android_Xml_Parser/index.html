<!DOCTYPE html>
<html>
  <head lang="zh">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black" name="apple-mobile-web-app-status-bar-style"/>
<meta content="telephone=no" name="format-detection"/>
<meta name="renderer" content="webkit">
<meta name="description" content="æ¸©æ•…è€ŒçŸ¥æ–°">
<meta http-equiv="Access-Control-Allow-Origin" content="*">

<title>Androidä¸­View,Drawable,Animationä»XMLä¸­è§£æç”Ÿæˆçš„è¿‡ç¨‹ | KuTeat</title>
<link href="https://kutear.github.io/styles/main.css" type="text/css" rel="stylesheet"/>
<link rel="stylesheet" href="//cdn.bootcss.com/KaTeX/0.10.2/katex.min.css"/>
<script src="//cdn.bootcss.com/KaTeX/0.10.2/katex.min.js"></script>
<script src="//cdn.bootcss.com/KaTeX/0.10.2/contrib/auto-render.min.js"></script>
<script type="text/javascript" src="https://kutear.github.io/media/scripts/jquery.js"></script>
<script type="text/javascript" src="https://kutear.github.io/media/scripts/jquery.pjax.min.js"></script>
<script type="text/javascript" src="https://kutear.github.io/media/scripts/basic.js"></script>
<script type="text/javascript" src="//cdn.bootcss.com/gitalk/1.5.0/gitalk.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script>
<script async type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script async type="text/javascript" src="https://kutear.github.io/media/scripts/search.js"></script>
<script type="text/javascript">
$(document).pjax('a[target!=_blank]', '#pjax-container', {
	fragment: '#pjax-container',
	timeout: 5000,
	cache: false
});
$(document).on('pjax:complete', function(){  	
	pjax();
});

$(window).on('popstate.pjax', function () {
	pjax();
})

function pjax() {
	$.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");

	if (("#gitalk-container").length > 0 ) {
	$('#mememe').attr('src','//source.unsplash.com/800x400/?arts,weather?'+Math.random());
	$.getScript("//cdn.bootcss.com/KaTeX/0.10.2/katex.min.js");
	$.getScript("//cdn.bootcss.com/KaTeX/0.10.2/contrib/auto-render.min.js");
	$('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
    	});
	}
}
</script>

  </head>

  <body>
     <div class="header">
      <div class="logo_title">
		  
        <div class="title animated fadeInDown"><img id="img1" style="display:inline-block;" src="https://kutear.github.io/images/avatar.png"/>
<script>
var r = 0;
    window.onload = function(){
        var current = 0;
        document.getElementById('img1').onclick = function(){
            current = (current+90)%360;
            this.style.transform = 'rotate('+current+'deg)';
        }
    };
</script>
          <h1 title="KuTeat" class="weaklink"><a  href="/">KuTeat</a>

          </h1>

          <div class="navbar weaklink">
            <div class="normal_nav">

<div class="bitcron_nav_container">


  <div class="bitcron_nav">
    <div class="mixed_site_nav_wrap site_nav_wrap">
		
      <ul class="mixed_site_nav site_nav sm sm-base">
	  
 
  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a>
  </li>
  
 
  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a>
  </li>
  
 
  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a>
  </li>
  
 
  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a>
  </li>
  
 
 <li>

      </ul>
	  

      <div class="clear clear_nav_inline_end"></div>
<div class="search">
    <i class="search-icon fa fa-search search-start"></i>
    <input type="text" class="search-input" placeholder="Searching..." />
    <i class="search-icon fa fa-refresh search-clear"></i>
	<div class="search-results"></div>
</div>
    </div>

  </div>



  <div class="clear clear_nav_end"></div>

</div>

            </div>
			
			<div class="hamberger"><i class="fa fa-bars"></i>
<i class="fa fa-times"></i>

			</div>

          </div>

        </div>

      </div>

      <div class="hidden_nav animated fadeInDown">

<div class="bitcron_nav_container">


  <div class="bitcron_nav">
    <div class="mixed_site_nav_wrap site_nav_wrap">
      <ul class="mixed_site_nav site_nav sm sm-base">
	
  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a>

  </li>


  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a>

  </li>


  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a>

  </li>


  <li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a>

  </li>




      </ul>

      <div class="clear clear_nav_inline_end"></div>
    </div>

  </div>



  <div class="clear clear_nav_end"></div>

</div>

      </div>

    </div>

<style type="text/css">
.search {
    position: relative;
    height: 30px;
    text-align: right;
    line-height: 30px;
    padding-right: 10px;
}

.search .search-icon {
    float: right;
    height: 100%;
    margin: 0 10px;
    line-height: 30px;
    cursor: pointer;
    user-select: none;
}

.search .search-input {
    float: right;
    width: 30%;
    height: 30px;
    line-height: 30px;
    margin: 0;
    border: 2px solid #ddd;
    border-radius: 10px;
    box-sizing: border-box;
}

.search .search-clear {
    display: none;
}

.search .search-results {
    display: block;
    z-index: 1000;
    position: absolute;
    top: 30px;
    right: 50px;
    width: 50%;
    max-height: 400px;
    overflow: auto;
    text-align: left;
    border-radius: 5px;
    box-shadow: 0 .3rem .5rem #333;
}

.search .search-results .result-item {
    color: #000;
    margin: 5px;
    padding: 3px;
    border-radius: 3px;
    cursor: pointer;
}

</style>

    <div class="main" id="pjax-container">
      <div class="main-inner">


<div class="content">






  <div class="post_page" >

<div class="post">
  <div class="post_title sm_margin">
    <h2><a>Androidä¸­View,Drawable,Animationä»XMLä¸­è§£æç”Ÿæˆçš„è¿‡ç¨‹</a>



    </h2>
  </div>
  
<script>
function lan(){
	if (document.getElementById("lan").innerText == "ç¹"){
		var s=document.getElementById("tongwenlet_cn");
		if(s != null){
		document.body.removeChild(s);
		}
		var s = document.createElement("script");
		s.language = "javascript";
		s.type = "text/javascript";
		s.src = "https://git.oschina.net/runningcheese/JiathisQR.js/raw/master/bookmarklet_tw.js";
		s.id = "tongwenlet_cn";
		document.body.appendChild(s);
		document.getElementById("lan").innerHTML = "ç®€"
	}
	else if(document.getElementById("lan").innerText == "ç°¡"){
		var s=document.getElementById("tongwenlet_cn");
		if(s != null){
		document.body.removeChild(s);
		}
		var s = document.createElement("script");
		s.language = "javascript";
		s.type = "text/javascript";
		s.src = "https://git.oschina.net/runningcheese/JiathisQR.js/raw/master/bookmarklet_cn.js";
		s.id = "tongwenlet_cn";
		document.body.appendChild(s);
		document.getElementById("lan").innerHTML = "ç¹"
		}
}

function change(){	
    var rand = Math.random()*1+1;
    var num = window.getComputedStyle(document.getElementsByName("show")[0],undefined).fontSize;
	num = num.slice(0,-2); 
    document.getElementById("show").style.fontSize = num - rand +'px';
}
</script>

  <div class="post_details">
    <div class="info"><i class="fa fa-clock-o"></i>
<span class="date_info">2016-10-10</span>
<i class="fa fa-eye"></i>

<span class="date_info"><span id="busuanzi_value_page_pv"></span> Views</span>

<i class="fa fa-bookmark-o"></i>
<span class="tags_info weaklink">
	

</span>
<span>18 min read</span>
&nbsp
&nbsp
<i class="fa fa-share"></i>
<a title="QR code" target="_blank" href="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://kutear.github.io/post/2016-10-09-Android_Xml_Parser"><i class="fa fa-qrcode"></i></a>
<a title="qq share" target="_blank" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://kutear.github.io/post/2016-10-09-Android_Xml_Parser&sharesource=qzone&title=Androidä¸­View,Drawable,Animationä»XMLä¸­è§£æç”Ÿæˆçš„è¿‡ç¨‹&pics=https://blog.blinkstar.cn/images/avatar.png&summary="><i class="fa fa-qq"></i></a>
<a title="weibo share" target="_blank" href="https://service.weibo.com/share/share.php?url=https://kutear.github.io/post/2016-10-09-Android_Xml_Parser&sharesource=weibo&title=Androidä¸­View,Drawable,Animationä»XMLä¸­è§£æç”Ÿæˆçš„è¿‡ç¨‹ + " - " + &pic="https://blog.blinkstar.cn/images/avatar.png"><i class="fa fa-weibo"></i></a>
&nbsp
&nbsp
<a id="daxiao" href="javascript:void(0);" onclick="change();" title="è°ƒæ•´å­—ä½“å¤§å°"><i class="fa fa-font"></i></a>
&nbsp
&nbsp
<a id="lan" href="javascript:void(0);" onclick="lan();" title="è°ƒæ•´ç®€ç¹ä½“">ç¹</a>
</div>
  </div>

  <div class="post_content markdown">
  &nbsp
  <img id="mememe" src="//source.unsplash.com/800x400/?arts,weather">
    <div name="show" id="show">
	<p class="md_block"><span class="md_line md_line_start md_line_end"><h1 id="view">View</h1>
<p>å¯¹äº<code>View</code>æˆ‘ä»¬å¸¸è§çš„ä½¿ç”¨å°±æ˜¯ä¸¤ç§ï¼Œä¸€ç§æ˜¯<code>setContent(int)</code>ï¼Œå¦ä¸€ç§ä¸º<code>LayoutInflater.inflate()</code>,å…¶æœ¬è´¨éƒ½æ˜¯ä¸€æ ·çš„ã€‚çš†ä¸º<code>LayoutInflater.inflate()</code>,æˆ‘ä»¬åˆ†æä¸€ä¸‹è¿™é‡Œçš„å…·ä½“å®ç°ã€‚</p>
<pre><code class="language-java">public View inflate(@LayoutRes int resource, @Nullable ViewGroup root, boolean attachToRoot) {
    final Resources res = getContext().getResources();
    final XmlResourceParser parser = res.getLayout(resource); //æ ¹æ®xmlè¿”å›ä¸€ä¸ªè§£æå™¨
    try {
        return inflate(parser, root, attachToRoot);

    } finally {
        parser.close();
    }
}
</code></pre>
<p>æ¥ç€å°±æ˜¯å‡½æ•°<code>inflate()</code>.</p>
<pre><code class="language-java">public View inflate(XmlPullParser parser, @Nullable ViewGroup root, boolean attachToRoot) {
    synchronized (mConstructorArgs) {
      final String name = parser.getName();
      if (TAG_MERGE.equals(name)) { //å¦‚æœæ˜¯&lt;merge /&gt;æ ‡ç­¾
          if (root == null || !attachToRoot) {
              throw new InflateException(&quot;&lt;merge /&gt; can be used only with a valid &quot;
                      + &quot;ViewGroup root and attachToRoot=true&quot;);
          }
          //å†…éƒ¨ä¹Ÿæ˜¯é€šè¿‡å‡½æ•°createViewFromTag()ç”ŸæˆView,å¹¶è°ƒç”¨rInflateChildren()é€’å½’è§£æ
         rInflate(parser, root, inflaterContext, attrs, false);
    } else {
        // Temp is the root view that was found in the xml
        //æ ¹æ®å½“å‰æ ‡ç­¾tagåˆ›å»ºView
        final View temp = createViewFromTag(root, name, inflaterContext, attrs);
        ViewGroup.LayoutParams params = null;
        if (root != null) {
          //è·å–xmlä¸­çš„å±æ€§ï¼Œå¦‚å®½é«˜ï¼Œå¾…ä¸ºviewè®¾ç½®layoutparams
            params = root.generateLayoutParams(attrs);  
            if (!attachToRoot) {
                // Set the layout params for temp if we are not
                // attaching. (If we are, we use addView, below)
                temp.setLayoutParams(params);
            }
        }

        // Inflate all children under temp against its context.
        //æŠŠå½“å‰è§£æçš„viewä½œä¸ºparent,ç»§ç»­é€’å½’è§£æå¥¹çš„child View         
        rInflateChildren(parser, temp, attrs, true);
        // We are supposed to attach all the views we found (int temp)
        // to root. Do that now.
        if (root != null &amp;&amp; attachToRoot) {
          //æœ€åæŠŠå½“å‰è§£æçš„viewæ·»åŠ åˆ°ä»–çš„parentä¸­
            root.addView(temp, params);      
        }

        // Decide whether to return the root that was passed in or the
        // top view found in xml.
        if (root == null || !attachToRoot) {
            result = temp;
        }
      }
      return result;
    }
}
</code></pre>
<p>ä¸Šé¢çš„å‡½æ•°éå¸¸å®¹æ˜“ç†è§£ï¼Œæˆ‘ä»¬ç°åœ¨è¦çœ‹çš„å‡½æ•°å°±æ˜¯<code>createViewFromTag()</code></p>
<pre><code class="language-java">View createViewFromTag(View parent, String name, Context context, AttributeSet attrs,
        boolean ignoreThemeAttr) {
    if (name.equals(&quot;view&quot;)) {
        name = attrs.getAttributeValue(null, &quot;class&quot;);
    }
    //åŸæ¥xmlè¿˜å¯ä»¥å†™æˆ
    //&lt;view class=&quot;TextView&quot; ...&gt;çš„å½¢å¼
    //&lt;blink&gt;æ ‡ç­¾  å®ç°é—ªçƒçš„å¦‚&lt;blink&gt;&lt;TextView text=&quot;AA&quot; ...&gt;&lt;/blink&gt; é‚£ä¹ˆAAä¼šé—ªçƒ
    if (name.equals(TAG_1995)) {
        // Let's party like it's 1995!
        return new BlinkLayout(context, attrs);
    }

    try {
        View view;
        ...
        //è¿™é‡Œæœ‰ä¸€äº›Factoryåˆ›å»ºæ–¹å¼ï¼Œä½†æ˜¯ä»–çš„é€»è¾‘å’Œä¸‹é¢ä¸€æ ·ï¼Œä¸å¤šè¯´
        ...
        if (view == null) {
            final Object lastContext = mConstructorArgs[0];
            mConstructorArgs[0] = context;
            try {
                if (-1 == name.indexOf('.')) {
                    view = onCreateView(parent, name, attrs); //ä¸å«. ä¸€å®šæ˜¯ç³»ç»Ÿçš„View,å¦‚TextView
                } else {
                    view = createView(name, null, attrs);  //éç³»ç»ŸVIew å¦‚æ”¯æŒåº“çš„View,è‡ªå®šä¹‰çš„View
                }
            } finally {
                mConstructorArgs[0] = lastContext;
            }
        }

        return view;
    } catch (InflateException e) {
      ...
    }
}
</code></pre>
<p>é€šè¿‡æºç ï¼Œæˆ‘ä»¬å‘ç°<code>onCreateView(..)</code>å…¶å®æ˜¯è°ƒç”¨<code>createView(name, &quot;android.view.&quot;, attrs)</code>,åªæ˜¯äººä¸ºçš„åŠ ä¸ŠViewçš„å‰ç¼€ã€‚</p>
<pre><code class="language-java">public final View createView(String name, String prefix, AttributeSet attrs)
        throws ClassNotFoundException, InflateException {
    Constructor&lt;? extends View&gt; constructor = sConstructorMap.get(name);  //æ„é€ å‡½æ•°ç¼“å­˜
    Class&lt;? extends View&gt; clazz = null;

    try {

        if (constructor == null) {
            // Class not found in the cache, see if it's real, and try to add it
            clazz = mContext.getClassLoader().loadClass(
                    prefix != null ? (prefix + name) : name).asSubclass(View.class);
            ...
            //    static final Class&lt;?&gt;[] mConstructorSignature = new Class[] {
            //                                Context.class, AttributeSet.class};
            constructor = clazz.getConstructor(mConstructorSignature);//è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°ä¸ºä»€ä¹ˆViewåœ¨xmlå®ä¾‹æ—¶è°ƒç”¨ä¸¤ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°
            constructor.setAccessible(true);
            sConstructorMap.put(name, constructor);
        } else {
            // If we have a filter, apply it to cached constructor
            if (mFilter != null) {
                // Have we seen this name before?
                Boolean allowedState = mFilterMap.get(name);
                if (allowedState == null) {
                    // New class -- remember whether it is allowed
                    clazz = mContext.getClassLoader().loadClass(
                            prefix != null ? (prefix + name) : name).asSubclass(View.class);

                    boolean allowed = clazz != null &amp;&amp; mFilter.onLoadClass(clazz);
                    mFilterMap.put(name, allowed);
                    if (!allowed) {
                        failNotAllowed(name, prefix, attrs);
                    }
                } else if (allowedState.equals(Boolean.FALSE)) {
                    failNotAllowed(name, prefix, attrs);
                }
            }
        }

        Object[] args = mConstructorArgs;
        args[1] = attrs;

        final View view = constructor.newInstance(args); //å®ä¾‹åŒ–Viewå¯¹è±¡
        if (view instanceof ViewStub) {
            // Use the same context when inflating ViewStub later.
            final ViewStub viewStub = (ViewStub) view;
            //å¯¹äºViewStub,ç°åœ¨è¿˜æ²¡è§£æå…¶å†…éƒ¨ç»“æ„ï¼Œå¾…è°ƒç”¨å‡½æ•°inflate()æ—¶æ‰è§£ææ›¿æ¢ä¸ºå†…éƒ¨çš„Viewã€‚
            viewStub.setLayoutInflater(cloneInContext((Context) args[0]));
        }
        return view;

    } catch (NoSuchMethodException e) {
      ...
    }
}
</code></pre>
<p>åˆ°æ­¤Viewçš„è§£æå°±ç®—å®Œäº†ã€‚</p>
<h1 id="drawable">Drawable</h1>
<p>è¿™é‡Œä»¥Backgroundä¸ºä¾‹è¯´æ˜ï¼Œåœ¨Viewçš„æ„é€ å“ˆæ•°ä¸­å­˜åœ¨è¿™æ ·ä¸€æ®µä»£ç </p>
<pre><code class="language-java">//View.java
final TypedArray a = context.obtainStyledAttributes(
                attrs, com.android.internal.R.styleable.View, defStyleAttr, defStyleRes);
int attr = a.getIndex(i);
switch (attr) {
    case com.android.internal.R.styleable.View_background:
        background = a.getDrawable(attr);
        break;
    case ..
}        
</code></pre>
<pre><code class="language-java">//TypedArray.java
@Nullable
public Drawable getDrawable(int index) {
  ...
  return mResources.loadDrawable(value, value.resourceId, mTheme);
}
</code></pre>
<p>åœ¨<code>loadDrawable()</code>å½“ä¸­ï¼Œåšäº†ä¸€äº›åˆ¤æ–­ï¼Œæ¯”å¦‚å½“å‰è¦çš„<code>Drawable</code>æ˜¯å¦å·²ç»åŠ è½½è¿‡äº†ï¼Œå³åˆ¤æ–­æ˜¯å¦å·²ç»åœ¨ç¼“å­˜ä¸­ï¼Œå¦‚æœåœ¨å°±ä¸éœ€è¦ä»xmlä¸­åŠ è½½ï¼Œåä¹‹å°±éœ€è¦åŠ è½½ï¼Œå¹¶ä¿å­˜åœ¨ç¼“å­˜ä¸­ã€‚è€ŒåŠ è½½å°±æ˜¯è°ƒç”¨å‡½æ•°<code>loadDrawableForCookie()</code>,ä¸‹é¢çœ‹çœ‹å…·ä½“çš„å®ç°ã€‚</p>
<pre><code class="language-java">private Drawable loadDrawableForCookie(TypedValue value, int id, Theme theme) {
    if (value.string == null) {
        throw new NotFoundException(&quot;Resource \&quot;&quot; + getResourceName(id) + &quot;\&quot; (&quot;
                + Integer.toHexString(id) + &quot;) is not a Drawable (color or path): &quot; + value);
    }

    final String file = value.string.toString(); //è¿™é‡Œæ˜¯æ–‡ä»¶çš„è·¯å¾„ å¦‚res/drawable/xxx.png
    final Drawable dr;
    try {
        if (file.endsWith(&quot;.xml&quot;)) {
            final XmlResourceParser rp = loadXmlResourceParser(
                    file, id, value.assetCookie, &quot;drawable&quot;);
            dr = Drawable.createFromXml(this, rp, theme);
            rp.close();
        } else {
            final InputStream is = mAssets.openNonAsset(
                    value.assetCookie, file, AssetManager.ACCESS_STREAMING);
            dr = Drawable.createFromResourceStream(this, value, is, file, null);
            is.close();
        }
    } catch (Exception e) {

    }
    return dr;
}
</code></pre>
<p>å¾ˆå®¹æ˜“çœ‹åˆ°ï¼Œè¿™é‡Œä»¥xmlç»“å°¾çš„æ–‡ä»¶å’Œå…¶ä»–å¦‚pngç»“å°¾çš„æ–‡ä»¶åšäº†åˆ†åˆ«å¤„ç†ï¼Œå…ˆçœ‹çœ‹ç®€å•çš„æ™®é€šçš„å›¾ç‰‡æ ¼å¼ï¼Œä¹Ÿå°±æ˜¯<code>else</code>ä¸­çš„ä»£ç ã€‚å¯ä»¥çœ‹è§æ˜¯å¾ˆç®€å•çš„å®ç°ï¼Œå°±æ˜¯æŠŠå›¾ç‰‡è½¬æ¢ä¸ºæ•°æ®æµï¼Œåœ¨é€šè¿‡æ•°æ®æµæ„å»ºDrawableå¯¹è±¡ã€‚é‡ç‚¹çœ‹çœ‹xmlç±»å‹Drawableçš„ç”Ÿæˆå§ã€‚è·Ÿå…¥è¿›å»ï¼Œæˆ‘ä»¬å‘ç°æœ‰ä¸ªç‰¹åˆ«çš„å‡½æ•°<code>createFromXmlInner()</code>ï¼Œä¸ºä»€ä¹ˆè¯´ç‰¹åˆ«ï¼Ÿå› ä¸ºå®ƒå°±æ˜¯åˆ›å»ºå…·ä½“<code>Drawable</code>çš„å‡½æ•°ã€‚</p>
<pre><code class="language-java">public static Drawable createFromXmlInner(Resources r, XmlPullParser parser, AttributeSet attrs,
        Theme theme) throws XmlPullParserException, IOException {
    final Drawable drawable;

    final String name = parser.getName();
    switch (name) {
        case &quot;selector&quot;:
            drawable = new StateListDrawable();
            break;
        case &quot;animated-selector&quot;:
            drawable = new AnimatedStateListDrawable();
            break;
        case &quot;level-list&quot;:
            drawable = new LevelListDrawable();
            break;
        case &quot;layer-list&quot;:
            drawable = new LayerDrawable();
            break;
        case &quot;transition&quot;:
            drawable = new TransitionDrawable();
            break;
        case &quot;ripple&quot;:
            drawable = new RippleDrawable();
            break;
        case &quot;color&quot;:
            drawable = new ColorDrawable();
            break;
        case &quot;shape&quot;:
            drawable = new GradientDrawable();
            break;
        case &quot;vector&quot;:
            drawable = new VectorDrawable();
            break;
        case &quot;animated-vector&quot;:
            drawable = new AnimatedVectorDrawable();
            break;
        case &quot;scale&quot;:
            drawable = new ScaleDrawable();
            break;
        case &quot;clip&quot;:
            drawable = new ClipDrawable();
            break;
        case &quot;rotate&quot;:
            drawable = new RotateDrawable();
            break;
        case &quot;animated-rotate&quot;:
            drawable = new AnimatedRotateDrawable();
            break;
        case &quot;animation-list&quot;:
            drawable = new AnimationDrawable();
            break;
        case &quot;inset&quot;:
            drawable = new InsetDrawable();
            break;
        case &quot;bitmap&quot;:
            drawable = new BitmapDrawable();
            break;
        case &quot;nine-patch&quot;:
            drawable = new NinePatchDrawable();
            break;
        default:
            throw new XmlPullParserException(parser.getPositionDescription() +
                    &quot;: invalid drawable tag &quot; + name);

    }
    drawable.inflate(r, parser, attrs, theme);
    return drawable;
}
</code></pre>
<p>å‰é¢çš„<code>switch</code>å°±æ˜¯ç®€å•çš„æ ¹æ®æ ‡ç­¾tagåˆ›å»ºå…·ä½“çš„å¯¹è±¡ï¼Œæœ€åè°ƒç”¨<code>drawable.inflate()</code>æ¥é…ç½®å…·ä½“çš„å‚æ•°ã€‚è¿™é‡Œæˆ‘ä»¬ä¸€å¸§åŠ¨ç”»<code>AnimationDrawable</code>æ¥è¯´æ˜ã€‚</p>
<pre><code class="language-java">@Override
public void inflate(Resources r, XmlPullParser parser, AttributeSet attrs, Theme theme)
        throws XmlPullParserException, IOException {
    final TypedArray a = obtainAttributes(r, theme, attrs, R.styleable.AnimationDrawable);
    super.inflateWithAttributes(r, parser, a, R.styleable.AnimationDrawable_visible);
    updateStateFromTypedArray(a);
    a.recycle();
    inflateChildElements(r, parser, attrs, theme);
}

private void inflateChildElements(Resources r, XmlPullParser parser, AttributeSet attrs,
        Theme theme) throws XmlPullParserException, IOException {
    int type;

    final int innerDepth = parser.getDepth()+1;
    int depth;
    //å¾ªç¯è·å–æ¯ä¸€å¸§åŠ¨ç”»ä¿¡æ¯
    while ((type=parser.next()) != XmlPullParser.END_DOCUMENT
            &amp;&amp; ((depth = parser.getDepth()) &gt;= innerDepth || type != XmlPullParser.END_TAG)) {
        if (type != XmlPullParser.START_TAG) {
            continue;
        }

        if (depth &gt; innerDepth || !parser.getName().equals(&quot;item&quot;)) {
            continue;
        }
        //å–å¾—æ¯ä¸ªåä¸ºitemçš„tagç»“ç‚¹
        final TypedArray a = obtainAttributes(r, theme, attrs,
                R.styleable.AnimationDrawableItem);

        final int duration = a.getInt(R.styleable.AnimationDrawableItem_duration, -1);
        if (duration &lt; 0) {
            throw new XmlPullParserException(parser.getPositionDescription()
                    + &quot;: &lt;item&gt; tag requires a 'duration' attribute&quot;);
        }

        Drawable dr = a.getDrawable(R.styleable.AnimationDrawableItem_drawable); //æŒ‰ç…§è§£æpngçš„æ–¹å¼è§£æ

        a.recycle();

        if (dr == null) {
            while ((type=parser.next()) == XmlPullParser.TEXT) {
                // Empty
            }
            if (type != XmlPullParser.START_TAG) {
                throw new XmlPullParserException(parser.getPositionDescription()
                        + &quot;: &lt;item&gt; tag requires a 'drawable' attribute or child tag&quot;
                        + &quot; defining a drawable&quot;);
            }
            dr = Drawable.createFromXmlInner(r, parser, attrs, theme);  //itemå†…éƒ¨å†åµŒxmlç±»å‹çš„Drawable
        }

        mAnimationState.addFrame(dr, duration); //æ·»åŠ åˆ°å­˜å‚¨æ¯ä¸€å¸§çš„å®¹å™¨ï¼Œå¸¦æ’­æ”¾æ—¶ä½¿ç”¨
        if (dr != null) {
            dr.setCallback(this);
        }
    }
}
</code></pre>
<p>å¯¹äº<code>Drawable</code>çš„è§£æå¤§ä½“å°±è¿™äº›ã€‚</p>
<h1 id="animation">Animation</h1>
<p>æˆ‘ä»¬çŸ¥é“ï¼ŒAndroidåŠ¨ç”»å¤§ä½“åˆ†ä¸ºä¸‰ç±»ï¼Œå¸§åŠ¨ç”»ï¼ŒView åŠ¨ç”»ï¼Œå’Œå±æ€§åŠ¨ç”»ã€‚å¸§åŠ¨ç”»åœ¨ä¸Šé¢Drawableå·²ç»è¯´è¿‡äº†ã€‚è€ŒViewåŠ¨ç”»å’Œå±æ€§åŠ¨ç”»åŸºæœ¬ä¸€æ ·çš„è§£æã€‚ä¸‹é¢ä»¥å±æ€§åŠ¨ç”»ä¸ºä¾‹çœ‹ä¸€ä¸‹ã€‚æˆ‘ä»¬é€‰æ‹©ä»å‡½æ•°<code>loadAnimator(Context context, @AnimatorRes int id)</code>å…¥æ‰‹ã€‚</p>
<pre><code class="language-java">public static Animator loadAnimator(Resources resources, Theme theme, int id,
            float pathErrorScale) throws NotFoundException {
        final ConfigurationBoundResourceCache&lt;Animator&gt; animatorCache = resources
                .getAnimatorCache();
        Animator animator = animatorCache.getInstance(id, theme); //ä¼˜å…ˆç¼“å­˜è¯»å–
        if (animator != null) {
            return animator;
        } else if (DBG_ANIMATOR_INFLATER) {
            Log.d(TAG, &quot;cache miss for animator &quot; + resources.getResourceName(id));
        }
        //ç¼“å­˜ä¸­ä¸å­˜åœ¨ï¼Œéœ€è¦è§£æ
        XmlResourceParser parser = null;
        try {
            parser = resources.getAnimation(id);
            animator = createAnimatorFromXml(resources, theme, parser, pathErrorScale);//åŠ¨ç”»çš„åˆ›å»º
            if (animator != null) {
                animator.appendChangingConfigurations(getChangingConfigs(resources, id));
                final ConstantState&lt;Animator&gt; constantState = animator.createConstantState();
                if (constantState != null) {
                    if (DBG_ANIMATOR_INFLATER) {
                        Log.d(TAG, &quot;caching animator for res &quot; + resources.getResourceName(id));
                    }
                    animatorCache.put(id, theme, constantState);
                    // create a new animator so that cached version is never used by the user
                    // è¿™é‡Œçš„æ³¨é‡Šè¯´æ˜æ¯æ¬¡ä»ç¼“å­˜ä¸­è¯»å–çš„cacheå…¶å®ä¹Ÿæ˜¯é€šè¿‡è¿™ç§æ–¹å¼åˆ›å»ºçš„ã€‚
                    animator = constantState.newInstance(resources, theme);
                }
            }
            return animator;
        } catch (XmlPullParserException ex) {
            ...
        } finally {
            if (parser != null) parser.close();
        }
    }
</code></pre>
<p>æ¯•ç«Ÿè¿™ä¸æ˜¯æˆ‘ä»¬è¿™é‡Œéœ€è¦ä¸»è¦å…³æ³¨çš„ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹çœ‹åˆ›å»ºçš„å‡½æ•°<code>createAnimatorFromXml()</code>.</p>
<pre><code class="language-java">private static Animator createAnimatorFromXml(Resources res, Theme theme, XmlPullParser parser,
        AttributeSet attrs, AnimatorSet parent, int sequenceOrdering, float pixelSize)
        throws XmlPullParserException, IOException {
    Animator anim = null;
    ArrayList&lt;Animator&gt; childAnims = null;

    // Make sure we are on a start tag.
    int type;
    int depth = parser.getDepth();

    while (((type = parser.next()) != XmlPullParser.END_TAG || parser.getDepth() &gt; depth)
            &amp;&amp; type != XmlPullParser.END_DOCUMENT) {

        if (type != XmlPullParser.START_TAG) {
            continue;
        }

        String name = parser.getName();
        boolean gotValues = false;

        if (name.equals(&quot;objectAnimator&quot;)) {  //ç”ŸæˆobjectAnimator
            anim = loadObjectAnimator(res, theme, attrs, pixelSize);
        } else if (name.equals(&quot;animator&quot;)) { //ValueAnimator
            anim = loadAnimator(res, theme, attrs, null, pixelSize);  //é€’å½’è¿‡ç¨‹
        } else if (name.equals(&quot;set&quot;)) {  //AnimatorSet
            //æˆ‘ä»¬çŸ¥é“ï¼ŒAnimatorSetæ˜¯ä¸ªå®¹å™¨ï¼Œè¿™é‡Œçš„é€»è¾‘å°±æ˜¯æŠŠå®ƒä½œä¸ºparent,åœ¨é€’å½’è§£æå­å…ƒç´ 
            anim = new AnimatorSet();
            TypedArray a;
            if (theme != null) {
                a = theme.obtainStyledAttributes(attrs, R.styleable.AnimatorSet, 0, 0);
            } else {
                a = res.obtainAttributes(attrs, R.styleable.AnimatorSet);
            }
            anim.appendChangingConfigurations(a.getChangingConfigurations());
            int ordering = a.getInt(R.styleable.AnimatorSet_ordering, TOGETHER);
            createAnimatorFromXml(res, theme, parser, attrs, (AnimatorSet) anim, ordering,
                    pixelSize); //é€’å½’è°ƒç”¨
            a.recycle();
        } else if (name.equals(&quot;propertyValuesHolder&quot;)) {  //è¿™é‡Œé¢è¿˜ä¼šè§£ækeyframeæ ‡ç­¾
            PropertyValuesHolder[] values = loadValues(res, theme, parser,
                    Xml.asAttributeSet(parser));
            if (values != null &amp;&amp; anim != null &amp;&amp; (anim instanceof ValueAnimator)) {
                ((ValueAnimator) anim).setValues(values);
            }
            gotValues = true;
        } else {
            throw new RuntimeException(&quot;Unknown animator name: &quot; + parser.getName());
        }

        if (parent != null &amp;&amp; !gotValues) {
            if (childAnims == null) {
                childAnims = new ArrayList&lt;Animator&gt;();
            }
            childAnims.add(anim);
        }
    }
    //ç”Ÿæˆå®Œæ¯•ï¼Œè€ƒè™‘æ·»åŠ åˆ°Parent
    if (parent != null &amp;&amp; childAnims != null) {
        Animator[] animsArray = new Animator[childAnims.size()];
        int index = 0;
        for (Animator a : childAnims) {
            animsArray[index++] = a;
        }
        if (sequenceOrdering == TOGETHER) {
            parent.playTogether(animsArray);
        } else {
            parent.playSequentially(animsArray);
        }
    }
    return anim;
}
</code></pre>
<p>æœ‰ç‚¹æŠ½è±¡ï¼Œä¸‹é¢æˆ‘ä»¬å…ˆå†™ä¸€ä¸ªå°ä¾‹å­çœ‹çœ‹åŠ¨ç”»çš„æ‰€æœ‰ç»“æ„ã€‚</p>
<pre><code class="language-xml">&lt;set android:ordering=&quot;sequentially&quot;&gt;
      &lt;animator
            android:duration=&quot;1000&quot;
            android:repeatCount=&quot;1&quot;
            android:repeatMode=&quot;reverse&quot;&gt;
      &lt;propertyValuesHolder&gt;
          &lt;keyframe android:fraction=&quot;0&quot; android:value=&quot;1&quot;/&gt;
          &lt;keyframe android:fraction=&quot;.2&quot; android:value=&quot;.4&quot;/&gt;
          &lt;keyframe android:fraction=&quot;1&quot; android:value=&quot;0&quot;/&gt;
      &lt;/propertyValuesHolder&gt;
    &lt;/animator&gt;
    &lt;objectAnimator
        android:duration=&quot;500&quot;
        android:valueTo=&quot;1f&quot;&gt;
          &lt;propertyValuesHolder android:propertyName=&quot;x&quot; &gt;
                &lt;keyframe android:fraction=&quot;0&quot; android:value=&quot;800&quot; /&gt;
                &lt;keyframe android:fraction=&quot;.2&quot;
                          android:interpolator=&quot;@android:anim/accelerate_interpolator&quot;
                          android:value=&quot;1000&quot; /&gt;
                &lt;keyframe android:fraction=&quot;1&quot;
                          android:interpolator=&quot;@android:anim/accelerate_interpolator&quot;
                          android:value=&quot;400&quot; /&gt;
          &lt;/propertyValuesHolder&gt;
          &lt;propertyValuesHolder android:propertyName=&quot;y&quot; &gt;
                &lt;keyframe/&gt;
                &lt;keyframe android:fraction=&quot;.2&quot;
                          android:interpolator=&quot;@android:anim/accelerate_interpolator&quot;
                          android:value=&quot;300&quot;/&gt;
                &lt;keyframe android:interpolator=&quot;@android:anim/accelerate_interpolator&quot;
                          android:value=&quot;1000&quot; /&gt;
          &lt;/propertyValuesHolder&gt;
      &lt;/objectAnimator&gt;
&lt;/set&gt;
</code></pre>
<p>æˆ‘ä»¬æ¥ä¸‹æ¥ä»¥<code>&lt;propertyValuesHolder/&gt;</code>çš„è§£æä¸ºä¾‹æ¥è¯´æ˜ã€‚</p>
<pre><code class="language-java">private static PropertyValuesHolder[] loadValues(Resources res, Theme theme,
            XmlPullParser parser, AttributeSet attrs) throws XmlPullParserException, IOException {
        ArrayList&lt;PropertyValuesHolder&gt; values = null;

        int type;
        while ((type = parser.getEventType()) != XmlPullParser.END_TAG &amp;&amp;
                type != XmlPullParser.END_DOCUMENT) {

            if (type != XmlPullParser.START_TAG) {
                parser.next();
                continue;
            }

            String name = parser.getName();

            if (name.equals(&quot;propertyValuesHolder&quot;)) {
                TypedArray a;
                if (theme != null) {
                    a = theme.obtainStyledAttributes(attrs, R.styleable.PropertyValuesHolder, 0, 0);
                } else {
                    a = res.obtainAttributes(attrs, R.styleable.PropertyValuesHolder);
                }
                String propertyName = a.getString(R.styleable.PropertyValuesHolder_propertyName);
                int valueType = a.getInt(R.styleable.PropertyValuesHolder_valueType,
                        VALUE_TYPE_UNDEFINED);

                PropertyValuesHolder pvh = loadPvh(res, theme, parser, propertyName, valueType);
                if (pvh == null) {
                    pvh = getPVH(a, valueType,
                            R.styleable.PropertyValuesHolder_valueFrom,
                            R.styleable.PropertyValuesHolder_valueTo, propertyName);
                }
                if (pvh != null) {
                    if (values == null) {
                        values = new ArrayList&lt;PropertyValuesHolder&gt;();
                    }
                    values.add(pvh);
                }
                a.recycle();
            }

            parser.next();
        }

        PropertyValuesHolder[] valuesArray = null;
        if (values != null) {
            int count = values.size();
            valuesArray = new PropertyValuesHolder[count];
            for (int i = 0; i &lt; count; ++i) {
                valuesArray[i] = values.get(i);
            }
        }
        return valuesArray;
    }
</code></pre>
<p>ä¸Šé¢ä»£ç æ²¡ä»€ä¹ˆå¯è¯´çš„ï¼Œå”¯ä¸€è¦çœ‹çš„å°±æ˜¯<code>PropertyValuesHolder</code>çš„åˆ›å»ºå‡½æ•°<code>loadPvh()</code>ã€‚</p>
<pre><code class="language-java">private static PropertyValuesHolder loadPvh(Resources res, Theme theme, XmlPullParser parser,
        String propertyName, int valueType)
        throws XmlPullParserException, IOException {

    PropertyValuesHolder value = null;
    ArrayList&lt;Keyframe&gt; keyframes = null;

    int type;
    while ((type = parser.next()) != XmlPullParser.END_TAG &amp;&amp;
            type != XmlPullParser.END_DOCUMENT) {
        String name = parser.getName();
        if (name.equals(&quot;keyframe&quot;)) {
            if (valueType == VALUE_TYPE_UNDEFINED) {
                valueType = inferValueTypeOfKeyframe(res, theme, Xml.asAttributeSet(parser));
            }
            //è§£ækeyframe
            Keyframe keyframe = loadKeyframe(res, theme, Xml.asAttributeSet(parser), valueType);  
            if (keyframe != null) {
                if (keyframes == null) {
                    keyframes = new ArrayList&lt;Keyframe&gt;();
                }
                keyframes.add(keyframe);
            }
            parser.next();
        }
    }

    int count;
    if (keyframes != null &amp;&amp; (count = keyframes.size()) &gt; 0) {
        ...å¯¹keyframesçš„è°ƒæ•´
        value = PropertyValuesHolder.ofKeyframe(propertyName, keyframeArray); //è®¾ç½®keyframe
        if (valueType == VALUE_TYPE_COLOR) {
            value.setEvaluator(ArgbEvaluator.getInstance());//è®¾ç½®ä¼°å€¼å™¨
        }
    }

    return value;
}
</code></pre>
<p>å§æ§½ï¼Œä¸€å±‚ä¸€å±‚ä½•æ—¶èƒ½åˆ°å¤´ã€‚</p>
<pre><code class="language-java">private static Keyframe loadKeyframe(Resources res, Theme theme, AttributeSet attrs,
        int valueType)
        throws XmlPullParserException, IOException {

    TypedArray a;
    if (theme != null) {
        a = theme.obtainStyledAttributes(attrs, R.styleable.Keyframe, 0, 0);
    } else {
        a = res.obtainAttributes(attrs, R.styleable.Keyframe);
    }

    Keyframe keyframe = null;

    float fraction = a.getFloat(R.styleable.Keyframe_fraction, -1);

    TypedValue keyframeValue = a.peekValue(R.styleable.Keyframe_value);
    boolean hasValue = (keyframeValue != null);
    if (valueType == VALUE_TYPE_UNDEFINED) {
        // When no value type is provided, check whether it's a color type first.
        // If not, fall back to default value type (i.e. float type).
        if (hasValue &amp;&amp; isColorType(keyframeValue.type)) {
            valueType = VALUE_TYPE_COLOR;
        } else {
            valueType = VALUE_TYPE_FLOAT;
        }
    }

    if (hasValue) {
        switch (valueType) {
            case VALUE_TYPE_FLOAT:
                float value = a.getFloat(R.styleable.Keyframe_value, 0);
                keyframe = Keyframe.ofFloat(fraction, value);
                break;
            case VALUE_TYPE_COLOR:
            case VALUE_TYPE_INT:
                int intValue = a.getInt(R.styleable.Keyframe_value, 0);
                keyframe = Keyframe.ofInt(fraction, intValue);
                break;
        }
    } else {
        keyframe = (valueType == VALUE_TYPE_FLOAT) ? Keyframe.ofFloat(fraction) :
                Keyframe.ofInt(fraction);
    }

    final int resID = a.getResourceId(R.styleable.Keyframe_interpolator, 0);
    if (resID &gt; 0) {
        final Interpolator interpolator = AnimationUtils.loadInterpolator(res, theme, resID); //æ’å€¼å™¨ï¼Œå’ŒViewåŠ¨ç”»ä¸€è‡´
        keyframe.setInterpolator(interpolator);
    }
    a.recycle();

    return keyframe;
}
</code></pre>
<p>ä¸Šé¢å‡½æ•°å¾ˆç®€å•ï¼Œå°±æ˜¯æ ¹æ®ä¸åŒçš„typeç”Ÿæˆä¸åŒçš„keyframe,è€Œtypeæˆ‘ä»¬ä»ä¸Šé¢çŸ¥é“æ˜¯ä»TypedValue.typeæ¥åˆ¤æ–­çš„ã€‚TypedValueä¸­æŒæœ‰å¾ˆå¤šçš„typeå£°æ˜</p>
<pre><code class="language-java">...
public static final int TYPE_DIMENSION = 0x05;
/** The &lt;var&gt;data&lt;/var&gt; field holds a complex number encoding a fraction
 *  of a container. */
public static final int TYPE_FRACTION = 0x06;
...
</code></pre>
<p>å¥½äº†ï¼Œåˆ°è¿™é‡Œå°±ç®—åˆ†æå®Œäº†,é‡Œé¢æœ‰å¾ˆå¤šä»£ç ç°åœ¨è¿˜æ˜¯ä¸å¤ªæ¸…æ¥šå…·ä½“çš„é€»è¾‘ã€‚ä½†æ˜¯æˆ‘ä»¬æµç¨‹è¿˜æ˜¯ç®—æ¸…æ¥šçš„äº†ã€‚</p>
</span></p></div>
	<br>
	<hr>
<div style="color: #ccc;font-size:14px;"><i class="fa fa-user"></i>æœ¬æ–‡ç”±<a rel="license" href="/">KuTeat</a>åˆ›ä½œ</div>	
<div style="color: #ccc;font-size:14px;"><i class="fa fa-cc"></i>è¯¥æ–‡ç« é‡‡ç”¨<a rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</div>
<div style="color: #ccc;font-size:14px;"><i class="fa fa-clock-o"></i>å‘å¸ƒæ—¶é—´ä¸ºï¼š2016-10-10</div>    
	 <p class="md_block">
    <div class="reward"><div class="reward-button">èµ <span class="reward-code"> <span class="alipay-code"> <img class="alipay-img" src="https://kutear.github.io/media/images/alipay.png"><b>æ”¯ä»˜å®æ‰«ç æ‰“èµ</b> </span> <span class="wechat-code"> <img class="wechat-img" src="https://kutear.github.io/media/images/wechat.png"><b>å¾®ä¿¡æ‰“èµ</b> </span> </span></div></div>
<div style="text-align:center;color: #ccc;font-size:14px;">å¦‚æœè§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œå¯ä»¥è¯·ä½œè€…å–ä¸€æ¯é¥®æ–™å“¦ğŸ¥¤</div>    
</p> 
</div>
</div>

<style type="text/css">
#mememe {
	border:3px;
	border-radius:5px;
    background-repeat: no-repeat;
    height: 100%;
	width: 100%;
	display: inline-block;
	border-radius:5px; 
}
</style>

<script>
var link = "" ;
$("img").each( (i,o) => {
	var o = $(o);
	if( o.attr("src").indexOf("sinaimg") > 0 || o.attr("src").indexOf("qpic") > 0 || o.attr("src").indexOf("baidu") > 0 || o.attr("src").indexOf("sinaimg") > 0){
		o.attr("referrerpolicy","no-referrer");
		link = o.attr("src");
		o.attr("src",link);
	}
});
</script>

<div style="width:100%;overflow:hidden">

          <div style="float:right;text-align:right;color:#ccc;font-size:18px;width:50%;">
            ä¸‹ä¸€ç¯‡
            <a href="https://kutear.github.io/post/2016-10-08-Android_Property_Animator">
              <h3 class="post-title">
                Androidå±æ€§åŠ¨ç”»åŸç†
              </h3>
            </a>
          </div>



          <div style="float:left;text-align:left;color:#ccc;font-size:18px;width:50%;">
            ä¸Šä¸€ç¯‡
            <a href="https://kutear.github.io/post/2016-10-27-PMS-1">
              <h3 class="post-title">
                PackageManagerServiceå­¦ä¹ --ä¸Š
              </h3>
            </a>
          </div>

</div>

<div class="doc_comments">

</div>

  </div>
</div>


      </div>
<div class="toc-container">
<ul class="markdownIt-TOC">
<li><a href="#view">View</a></li>
<li><a href="#drawable">Drawable</a></li>
<li><a href="#animation">Animation</a></li>
</ul>

</div>
    </div>
	
   <div class="footer">
<div class="site_footer_wrap"><div class="site_footer">

      <div class="mysocials"><div class="my_socials">
		   
			   
    
			   
    
			   
    
			   
    
			   
    
			   
    
</div>
      </div>

      <div class="copyright" id="copyright">
	  <script>
		var date=new Date;
		var year=date.getFullYear(); 
		document.write("Copyright Â© "+year+" " + "KuTeat. ");
		</script>
		Powered by Gridea.
		<br>
		æœ¬ç«™å·²ç¨³å®šè¿è¡Œäº†
		<strong><script type="text/javascript">
		var urodz= new Date("10/28/2018");
		var now = new Date();
		var ile = now.getTime() - urodz.getTime();
		var dni = Math.floor(ile / (1000 * 60 * 60 * 24));
		document.write(+dni)
		</script>
		</strong>å¤©
		<br>
		æœ¬ç«™æ€»è®¿é—®é‡ä¸º <strong><span id="busuanzi_value_site_uv"></span></strong> æ¬¡
	  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
      </div>
	  <img src="https://kutear.github.io/media/images/font.svg">

    </div>

<script type="text/javascript" src="https://kutear.github.io/media/scripts/love.js"></script>
<script type="text/javascript" src="https://kutear.github.io/media/scripts/darkmode.js"></script>
<script>
var options = {
  bottom: '64px', // default: '32px'
  right: '32px', // default: '32px'
  left: 'unset', // default: 'unset'
  time: '0.5s', // default: '0.3s'
  mixColor: '#fff', // default: '#fff'
  backgroundColor: '#fff',  // default: '#fff'
  buttonColorDark: '#100f2c',  // default: '#100f2c'
  buttonColorLight: '#fff', // default: '#fff'
  saveInCookies: false, // default: true,
  label: 'ğŸŒ“', // default: ''
  autoMatchOsTheme: true // default: true
}

const darkmode = new Darkmode(options);
darkmode.showWidget();
</script>
<script>
hljs.initHighlightingOnLoad();
</script>

</body>

</html>
